<!--
  ~ Copyright 2004-2012 ICEsoft Technologies Canada Corp.
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the
  ~ License. You may obtain a copy of the License at
  ~
  ~ http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing,
  ~ software distributed under the License is distributed on an "AS
  ~ IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either
  ~ express or implied. See the License for the specific language
  ~ governing permissions and limitations under the License.
  -->

<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	    		xmlns:ui="http://java.sun.com/jsf/facelets"
	  			xmlns:h="http://java.sun.com/jsf/html"
	  			xmlns:f="http://java.sun.com/jsf/core"
	  			xmlns:ice="http://www.icesoft.com/icefaces/component"
				template="/WEB-INF/layouts/standard.xhtml">

<ui:define name="notes">
	<p>
		This page displays a search form.
		Mouse over the "Search String" field to see its tooltip.
		If you are logged in, a second panel will show your current bookings.
	</p>
</ui:define>

<ui:define name="content">

    <h:form id="hotelSearchForm">
        <ice:panelCollapsible expanded="true">
            <f:facet name="header">
                <ice:panelGroup>
                    <ice:outputText value="Search Hotels" />
                </ice:panelGroup>
            </f:facet>
        <ice:panelGroup>
                <h:panelGrid columns="2">
                    <h:outputLabel for="searchString">Search String: </h:outputLabel>
                    <ice:panelGroup panelTooltip="searchTooltip">
                        <h:inputText id="searchString" value="#{searchCriteria.searchString}" />
                    </ice:panelGroup>
                    <h:outputLabel for="pageSize">Maximum Results: </h:outputLabel>
                    <h:selectOneMenu id="pageSize" value="#{searchCriteria.pageSize}">
                        <f:selectItems value="#{referenceData.pageSizeOptions}" />
                    </h:selectOneMenu>
                    <h:commandButton id="findHotels" value="Find Hotels" action="search" />
                </h:panelGrid>
                <ice:panelTooltip id="searchTooltip" displayOn="hover" >
                    <f:facet name="header">
                        <ice:outputText value="Search Tip" styleClass="cream" style="width: 200px;" />
                    </f:facet>
                    <f:facet name="body">
                        <ice:panelGroup styleClass="width: 200px;">
                            <ice:outputText value="Search hotels by name, address, city, or zip." styleClass="cream"/>
                        </ice:panelGroup>
                    </f:facet>
                </ice:panelTooltip>
            </ice:panelGroup>
        </ice:panelCollapsible>
    </h:form>

    <ice:form id="userBookingsList">
        <ice:panelGroup id="bookingsContent" rendered="#{bookings.rowCount > 0}">

				<ice:dataTable value="#{bookings}" var="booking" style="margin-left: 1px;">
                    <f:facet name="header">
                        <ice:panelGroup>
                            <ice:outputText value="Your Bookings" />
                        </ice:panelGroup>
                    </f:facet>
					<ice:column>
						<f:facet name="header">Hotel</f:facet>
						#{booking.hotel.name}<br/>
						#{booking.hotel.address}<br/>
						#{booking.hotel.city}, #{booking.hotel.state}
					</ice:column>
			        <ice:column>
			            <f:facet name="header">Check in</f:facet>
			            <h:outputText value="#{booking.checkinDate}">
			            	<f:convertDateTime dateStyle="short"/>
						</h:outputText>
			        </ice:column>
			        <ice:column>
			            <f:facet name="header">Check out</f:facet>
			            <h:outputText value="#{booking.checkoutDate}">
			            	<f:convertDateTime dateStyle="short"/>
						</h:outputText>
			        </ice:column>
					<ice:column>
						<f:facet name="header">Confirmation #</f:facet>
						#{booking.id}
					</ice:column>
					<ice:column>
						<f:facet name="header">Action</f:facet>
						<ice:commandButton id="cancel" value="Cancel" action="cancelBooking" />
					</ice:column>
				</ice:dataTable>
			</ice:panelGroup>
            <ice:panelGroup rendered="#{bookings.rowCount==0}">
                <h:outputText value="No Bookings Found" />
            </ice:panelGroup>
    </ice:form>

</ui:define>
</ui:composition>