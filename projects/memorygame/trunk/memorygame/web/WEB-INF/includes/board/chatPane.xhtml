<!--
 ~ Version: MPL 1.1
 ~
 ~ "The contents of this file are subject to the Mozilla Public License
 ~ Version 1.1 (the "License"); you may not use this file except in
 ~ compliance with the License. You may obtain a copy of the License at
 ~ http://www.mozilla.org/MPL/
 ~
 ~ Software distributed under the License is distributed on an "AS IS"
 ~ basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
 ~ License for the specific language governing rights and limitations under
 ~ the License.
 ~
 ~ The Original Code is ICEfaces 1.5 open source software code, released
 ~ November 5, 2006. The Initial Developer of the Original Code is ICEsoft
 ~ Technologies Canada, Corp. Portions created by ICEsoft are Copyright (C)
 ~ 2004-2009 ICEsoft Technologies Canada, Corp. All Rights Reserved.
 ~
 ~ Contributor(s): _____________________.
 ~
-->
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:ice="http://www.icesoft.com/icefaces/component">
	<table cellspacing="1" cellpadding="0" border="0"
	       style="width: 99.5%; height: 100%;">
	<tr style="height: 10%;">
	    <td width="100%" align="left" valign="middle" class="rightCell">
	        <table cellspacing="0" cellpadding="2" class="rightTable">
	            <tr>
	                <td width="95%" align="center" valign="top">
	                    <ui:include src="/WEB-INF/includes/board/menu.xhtml"/>
	                </td>
	                <td width="5%" align="center" valign="top">
	                    <ice:form>
	                        <ice:outputConnectionStatus showPopupOnDisconnect="true"/>
	                    </ice:form>
	                </td>
	            </tr>
	        </table>
	        <table cellspacing="0" cellpadding="2" class="rightTable">
	            <tr>
	                <td width="50%" align="center" valign="middle">
	                    <ice:outputLabel for="gridSize" value="Grid Size:"/>
	                    <ice:outputText id="gridSize" value="#{userSession.currentGame.board.size}">
	                        <f:converter converterId="GridSizeFormatter"/>
	                    </ice:outputText>
	                </td>
	                <td width="50%" align="center" valign="middle">
	                    <ice:outputLabel for="gameCount" value="Available Games:"/>
	                    <ice:outputText id="gameCount" value="#{gameManager.gameCount}"/>
	                </td>
	            </tr>
	        </table>
	    </td>
	</tr>
	<tr style="height: 20%;">
	    <td width="100%" align="center" valign="top" class="rightCell">
	        <ice:form id="sbf">
	        <ice:dataTable id="sb"
	                       value="#{userSession.currentGame.usersByScore}"
	                       var="user"
	                       cellspacing="2" cellpadding="2"
	                       rows="6"
	                       styleClass="genericTable"
	                       style="border: 0;"
	                       columnClasses="scoreTurnCol,scoreNameCol,scoreScoreCol">
	            <ice:column>
	                <f:facet name="header">
	                    &amp;nbsp;
	                </f:facet>
	                <ice:graphicImage id="tm"
	                                  value="./css/images/turn-marker.png"
	                                  styleClass="imageButton"
	                                  alt="Current Turn"
	                                  title="Current Turn"
	                                  rendered="#{user.isTurn}"/>
	            </ice:column>
	            <ice:column>
	                <f:facet name="header">
	                    Name
	                </f:facet>
	                <ice:outputText value="#{user.name}"
                                    style="font-weight: #{user.isTurn ? 'bold' : 'normal'};"/>
	            </ice:column>
	            <ice:column>
	                <f:facet name="header">
	                    Score
	                </f:facet>
	                <ice:outputText value="#{user.score}"/>
	            </ice:column>
	        </ice:dataTable>
	        </ice:form>
	    </td>
	</tr>
	<tr style="height: 70%;">
	    <td width="100%" align="center" valign="top" class="rightCell">
	        <ice:form id="f">
	        <ice:panelGrid id="ic" columns="3" cellspacing="0" cellpadding="0"
	                       styleClass="rightTable"
	                       style="padding-right: 2px;"
	                       columnClasses="labelCol,messageCol,sendCol">
	            <ice:outputLabel for="chatInput" value=">"/>
	            <ice:inputText id="chatInput" value="#{chatBean.text}"
	                           actionListener="#{chatBean.submitMessage}"
	                           maxlength="500"
	                           style="color: #{chatBean.fontColor}; width: 100%;"
	                           effect="#{chatBean.effect}"/>
	            <ice:commandButton value="Send"
	                               styleClass="fullButton"
	                               actionListener="#{chatBean.submitMessage}"/>
	            <ice:message errorClass="errorMessage" for="chatInput"/>
	        </ice:panelGrid>
	        </ice:form>
	                    
	        <ice:form>
	        <ice:dataTable id="c"
	                       value="#{userSession.currentGame.chat.messages}"
	                       var="message"
	                       rows="#{chatBean.tableRows}"
	                       cellspacing="0" cellpadding="2"
	                       styleClass="cm"
	                       style="padding: 0; margin: 0;"
	                       rowClasses="lightRow,darkRow"
	                       columnClasses="nCol,tCol">
	            <ice:column>
	                <ice:outputText id="s"
	                                value="#{message.sender}"
	                                escape="true"
	                                title="Sent at #{message.timestampFormatted}"/>
	            </ice:column>
	            <ice:column>
	                <ice:outputText id="t" value="#{message.text}" escape="true"
	                                style="color: #{message.fontColor};"/>
	            </ice:column>
	        </ice:dataTable>
	        </ice:form>
	    </td>
	</tr>
	</table>
</ui:composition>