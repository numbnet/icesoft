<project name="basic" default="war">
    <property name="src.dir" location="src"/>
    <property name="build.dir" location="build"/>
    <property name="build.classes.dir" location="${build.dir}/classes"/>
    <property name="dist.dir" location="dist"/>
    <property name="lib.dir" location="../../lib"/>
    <property name="icefaces.jar" location="${lib.dir}/icefaces.jar"/>
    <property name="compile.debug" value="true"/>

    <path id="compile.classpath">
        <pathelement location="${build.classes.dir}"/>
        <fileset dir="${lib.dir}">
            <include name="*.jar"/>
        </fileset>
    </path>

    <target name="clean">
        <delete dir="${build.dir}"/>
        <delete dir="${dist.dir}"/>
    </target>

    <target name="compile" >
        <delete dir="${build.classes.dir}"/>
        <mkdir dir="${build.classes.dir}"/>
        <javac destdir="${build.classes.dir}" sourcepath=""
               debug="${compile.debug}" source="1.5" target="1.5">
            <classpath refid="compile.classpath"/>
            <src location="${src.dir}"/>
        </javac>
    </target>

    <target name="war" depends="compile" description="Create ${ant.project.name}.war.">
        <copy todir="${build.dir}/${ant.project.name}/WEB-INF">
            <fileset dir="web/WEB-INF">
                <include name="*.xml"/>
                <include name="*.xhtml"/>
            </fileset>
        </copy>
        <copy file="${icefaces.jar}" todir="${build.dir}/${ant.project.name}/WEB-INF/lib">
        </copy>
        <copy todir="${build.dir}/${ant.project.name}/WEB-INF/classes">
            <fileset dir="src"/>
        </copy>

        <copy todir="${build.dir}/${ant.project.name}/">
            <fileset dir="web">
                <include name="*.html"/>
                <include name="*.xhtml"/>
                <include name="*.gif"/>
                <include name="*.jpg"/>
                <include name="*.jsp"/>
                <include name="*.xml"/>
            </fileset>
        </copy>
        <mkdir dir="dist" />
        <zip destfile="${dist.dir}/${ant.project.name}.war" basedir="${build.dir}/${ant.project.name}" />
    </target>

</project>
