[Ice].as(function(A){A.Cookie=A.Parameter.Association.subclass({initialize:function(B,C,D){this.name=B;this.value=C||"";this.path=D||"/";this.save();},saveValue:function(B){this.value=B;this.save();},loadValue:function(){this.load();return this.value;},save:function(){document.cookie=this.name+"="+this.value+"; path="+this.path;return this;},load:function(){var B=A.Cookie.parse().detect(function(C){return this.name==C[0];}.bind(this));this.value=B?B[1]:null;return this;},remove:function(){var B=new Date();B.setTime(B.getTime()-24*60*60*1000);document.cookie=this.name+"=; expires="+B.toGMTString()+"; path="+this.path;}});A.Cookie.all=function(){return A.Cookie.parse().collect(function(B){var C=B[0];var D=B[1];return new A.Cookie(C,D);});};A.Cookie.lookup=function(B,D){var C=A.Cookie.parse().detect(function(E){return B==E[0];});if(C){return new A.Cookie(B,C[1]);}else{if(D){return new A.Cookie(B,D);}else{throw"Cannot find cookie named: "+B;}}};A.Cookie.exists=function(B){return document.cookie.contains(B+"=");};A.Cookie.parse=function(){return document.cookie.split("; ").collect(function(B){return B.contains("=")?B.split("="):[B,""];});};});