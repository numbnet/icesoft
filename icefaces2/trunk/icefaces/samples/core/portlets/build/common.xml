<!--
  ~ Version: MPL 1.1
  ~
  ~ The contents of this file are subject to the Mozilla Public License
  ~ Version 1.1 (the "License"); you may not use this file except in
  ~ compliance with the License. You may obtain a copy of the License at
  ~ http://www.mozilla.org/MPL/
  ~
  ~ Software distributed under the License is distributed on an "AS IS"
  ~ basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
  ~ License for the specific language governing rights and limitations under
  ~ the License.
  ~
  ~ The Original Code is ICEfaces 1.5 open source software code, released
  ~ November 5, 2006. The Initial Developer of the Original Code is ICEsoft
  ~ Technologies Canada, Corp. Portions created by ICEsoft are Copyright (C)
  ~ 2004-2010 ICEsoft Technologies Canada, Corp. All Rights Reserved.
  ~
  ~ Contributor(s): _____________________.
  -->

<project name="portlets-common" default="war.basic">
    
    <property name="icefaces.base.dir" location="../../.."/>
    <property name="portlet.lib.dir" location="${icefaces.base.dir}/lib/portlets"/>
    <property file="../../build/build.properties"/>
    <import file="../build/common.xml"/>
        
    <patternset id="portlet.jars">
        <include name="jsf*.jar"/>
        <include name="portletfaces*.jar"/>
        <include name="slf4j*.jar"/>
    </patternset>

    <target name="portletize" description="Adds portlet content to the .war file">
    
        <copy todir="${build.dir}/dist/exploded/WEB-INF/lib">
          <fileset dir="${portlet.lib.dir}">
              <patternset refid="portlet.jars"/>
          </fileset>
        </copy>

        <zip destfile="${build.dir}/dist/${ant.project.name}-ice2-portlet.war" basedir="${build.dir}/dist/exploded"/>
    </target>
</project>
