<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd" >
<html>
<head>
    <title>OutputChart Component Tutorials</title>
    <LINK href="css/styles.css" rel="stylesheet" type="text/css"/>
</head>

<body>
<!-- header section -->
<p class="tutorialHeaderText">The ICEfaces Tutorial<br/>
    <a href="index.html"> Table of Contents</a>
</p>
<hr/>

<p>
    <b>Lesson:</b> Using the OutputChart component
</p>

<!-- tutorial content section -->

<h1>How to Use the ICEfaces OutputChart Component</h1>

<p>
    The <span class="object-name">outputChart</span> uses the JCharts open source
    charting utility (http://jcharts.sourceforge.net/) to create charts. The two
    main types of charts that can be created with this component are axis charts
    and pie charts.
</p>

<p>This tutorial will discuss the following topics related to the use of the
    <span class="object-name">outputChart</span> component:</p>
<ul>
    <li><a href="#axisoutputChartcomponent">Axis OutputChart Component</a></li>
    <li><a href="#pieoutputChartcomponent">Pie OutputChart Component</a>
    </li>
    <li><a href="#dynamicoutputChartcomponent">Dynamic OutputChart Component</a></li>
    <li><a href="#examplesthatuseoutputChart">Examples that use OutputChart Component</a></li>
</ul>

<a name="axisoutputChartcomponent"><h2>Axis OutputChart Component</h2></a>

    <p>There are 7 types of axis charts: area, areastacked, bar, barclustered, barstacked,
       line and point.
    </p>


      <div class="screenshot">
          <img src="images/area.png"
                title="Area Chart"
                alt="Area Chart"
                width="200" />
      </div>
      <div class="screenshot">
          <img src="images/areastacked.png"
                title="AreaStacked Chart"
                alt="AreaStacked Chart"
                width="200" />
      </div>
      <div class="screenshot">
          <img src="images/bar.png"
                title="Bar Chart"
                alt="Bar Chart"
                width="200" />
      </div>
      <div class="screenshot">
          <img src="images/barclustered.png"
                title="BarClustered Chart"
                alt="BarClustered Chart"
                width="200" />
      </div>
      <div class="screenshot">
          <img src="images/barstacked.png"
                title="BarStacked Chart"
                alt="BarStacked Chart"
                width="200" />
      </div>
      <div class="screenshot">
          <img src="images/line.png"
                title="Line Chart"
                alt="Line Chart"
                width="200" />
      </div>
      <div class="screenshot">
          <img src="images/point.png"
                title="Point Chart"
                alt="Point Chart"
                width="200" />
      </div>

    <p>
		<pre>
				<ice:outputChart id="axisOutputChart"
								 type="bar"
								 chartTitle="Bar Chart"
								 yaxisTitle="Problems"
								 xaxisTitle="Years"
								 xaxisLabels="#{axisChartBean.labels}"
								 labels="#{axisChartBean.legendLabels}"
								 colors="#{axisChartBean.paints}"
								 data="#{axisChartBean.data}" />
		</pre>
       The "colors" method of the bean may return either a java.util.List of
       java.awt.Color, an array of java.awt.Color or a String array.
       You can also define the data statically in the jsf page:
		<pre>
		   colors="red, blue, green"
		</pre>
       The "data" method of the bean may return either a java.util.List of
       double array for each pair value, or a double array.
       You can also define the data statically in the jsf page:
		<pre>
		   Defining the data for an axis type chart in the jsf page for two data sets:
		   data="10, 30, 40, 33: 30, 20, 30, 40"
		   NOTE: the colon(":") is used as the identifier for a new data set.
		</pre>
       The axis charts use the same underlying data structure which can allow you
       to change the chart type dynamically:
		<pre>
		   type="#{axisChartBean.type}"
		</pre>

       The participation of the outputChart component with the jsf lifecycle allows
       developers to hook actionListeners to a clientSideImageMap. This feature can
       be harnessed to provide drill down behavior in all axis charts except area and
       areastacked.  In the demo, when you click on a bar in the chart this will trigger
       the actionListener to display the value of that bar on the page.
       <pre>
           actionListener="#{axisChartBean.imageClicked}"
       </pre>
       By default the chart component renders only on the first render cycle and any
       further render requests will not cause it to be re-rendered unless specified.
       The rendering of a chart can be an expensive operation if it renders on every
       render phase. The renderOnSubmit attribute lets the developer decide when to
       render the chart.
       <pre>
           renderOnSubmit="#{axisChartBean.newChart}"
       </pre>
    </p>
<br/>

<div class="demo-instruction">
    <h3>See the demo:</h3>
    <ul>
        <li>See the outputChart-axis demo for your self by clicking
            <a href="/outputChart-axis-tutorial/"
               target="_blank">here</a>,
            or download the outputChart-axis source code <a
                href="outputChart-axis-tutorial.zip">here</a>.</li>
    </ul>
</div>

<a name="progressoutputChartcomponent"><h2>OutputChart Component with OutputProgress Component</h2></a>

    <p>In order to see the progress of a file as it uploads, we must place an ice:outputProgress
       component on the page and add a progressListener to the ice:outputChart component.  The
       progressListener on the outputChart component sets the value of an integer in the backing
       bean that in turn, is bound to the value attribute of the ice:outputProgress component.
       This integer lets the ice:outputProgress component know the percentage progress of the
       file as it is being uploaded.
    </p>
    <p>Here are some things to consider when implementing the progressListener, you can see the
       implementation in the source code:<br />
       The method must take a single argument of type java.util.EventObject.<br />
       Beans which implement the progressListener must be in session scope.<br />
       The PersistentFacesState must be set in the constructor of the implementing session bean.<br />
       The developer must invoke a render() call on this PersistentFacesState instance.
    </p>

<div class="demo-instruction">
    <h3>See the demo:</h3>
    <ul>
        <li>See the outputChart-progress demo for your self by clicking
            <a href="/outputChart-progress-tutorial/"
               target="_blank">here</a>,
            or download the outputChart-progress source code <a
                href="outputChart-progress-tutorial.zip">here</a>.
        </li>
    </ul>
</div>

<a name="advancedoutputchartcomponent"><h2>Advanced OutputChart Component</h2></a>

    <h4>Maximum File Size</h4>

    <p>If you want to change the maximum file size that can be uploaded with the
        ice:outputChart component, you must add a context parameter to the web.xml
        file.  The default maximum is 10 MB, we will change the maximum to 2 MB in
        the advanced demos by adding the following:</p>
    <pre>
    &lt;context-param&gt;
        &lt;param-name&gt;com.icesoft.faces.uploadMaxFileSize&lt;/param-name&gt;
        &lt;param-value&gt;2097152&lt;/param-value&gt;
    &lt;/context-param&gt;
    </pre>

    <h4>ActionListener Attribute</h4>

    <p>An actionListener is invoked when the uploaded file is saved, or on any
        exception. This means the developer can perform an operation when the
        component reaches one of the following four OutputChart states:  [SAVED,
        INVALID, SIZE_LIMIT_EXCEEDED, UNKNOWN_SIZE].</p>
    <p> The advanced demo removes the ice:message component we used previously to
        output error messages.  Now we will use the actionListener method to query
        the component for its state and output the state with an ice:outputText
        component.  When using the demo, try uploading a file greater than 2 MB in size
        to confirm we have changed the maximum file size with the addition of the context
        parameter above.</p>

    <h4>UniqueFile Attribute</h4>

    <p>The ice:outputChart component features an attribute that lets you manipulate
        where the file will be saved.  The default behaviour of the component is to
        create a folder at the root of your context with the session id as its name.
        This allows you to easily associate files to a specific session.  If you add
        the attribute uniqueFolder="false" to the component, files will be uploaded
        to the context root and a folder will not be created.
    </p>
    <p>The advanced demo has two components under the heading UniqueFile Attribute, both of them
       have an outputText component underneath to show the location of the file after it has been
       uploaded.  The first component shows the default behaviour of creating a folder in the
       context root with the session id for a name and placing the file in that folder.  The
       second component has the attribute uniqueFolder="false" which means the file will be uploaded
       directly to the context root.
    </p>

<div class="demo-instruction">
    <h3>See the demo:</h3>
    <ul>
        <li>See the outputChart-advanced demo for your self by clicking
            <a href="/outputChart-advanced-tutorial/"
               target="_blank">here</a>,
            or download the outputChart-advanced source code <a
                href="outputChart-advanced-tutorial.zip">here</a>.
        </li>
    </ul>
</div>

<a name="examplesthatuseoutputchart"><h2>Examples that Use OutputChart</h2></a>

<table cellpadding="1" cellspacing="0" class="examplesTable" width="100%" >
    <thead>
        <tr>
            <td class="headerTitle">Example</td>
            <td class="headerTitle">Source</td>
            <td class="headerTitle">Notes</td>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td class="bodyExample">Component Showcase</td>
            <td class="bodySource">Available in release bundles</td>
            <td class="bodyNotes">Contains axis outputChart example.</td>
        </tr>
        <tr>
            <td class="bodyExample">outputChart-axis</td>
            <td class="bodySource"><a
                    href="outputChart-axis-tutorial.zip">outputChart-axis
                source code</a></td>
            <td class="bodyNotes">Simple example of how to use outputChart component.</td>
        </tr>
        <tr>
            <td class="bodyExample">outputChart-progress</td>
            <td class="bodySource"><a
                    href="outputChart-progress-tutorial.zip">outputChart-progress
                source code</a></td>
            <td class="bodyNotes"> An outputProgress component is added to the page and
            connected to the progress of the uploading file<./td>
        </tr>
        <tr>
            <td class="bodyExample">outputChart-advanced</td>
            <td class="bodySource"><a
                    href="outputChart-advanced-tutorial.zip">outputChart-advanced
                source code</a></td>
            <td class="bodyNotes">The maximum file size is altered.  The ActionListener and
            UniqueFile attributes are explained.</td>
        </tr>
    </tbody>
</table>

<!-- footer section -->
<hr/>

<p class="tutorialFooterText">The ICEfaces Tutorial
    <br/>
    <a href="index.html"> Table of Contents</a>
</p>

<p>Copyright 2006 ICEsoft Technologies Inc. All rights reserved.</p>
</body>
</html>